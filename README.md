# ä½ å¥½ï¼Œæ¬¢è¿æ¥åˆ° rock-bottom

ä½ æœ‰æ¢¦æƒ³
ä½ æœ‰é­‚ç‰µæ¢¦è¦çš„äºº
...è¿˜æ˜¯å¤šåŠªåŠ›å§ ğŸ’ª

![](readme/IMG_4338.jpg)

* **è¿™ä¸ªé¡¹ç›®å‘¢ï¼Œæ˜¯ç»™è‡ªå·±ç”¨çš„ä¸€ä¸ªå° demo ï¼Œ ä»£ç ä»¥åŠ git ç›¸å…³çš„ä¸œè¥¿å¤šæœ‰ä¸å–„ï¼Œåæ­£ä¸ä¼šæœ‰äººå…‰é¡¾ï¼Œå¯¹ä¹ˆğŸ§ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªé¡¹ç›®å‘¢ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥ç”Ÿæˆç»ƒä¹ é¢˜çš„è½¯ä»¶ï¼Œæœ‰æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œè¦æ˜¯ä½ çœŸæœ‰é—²å¿ƒå±…ç„¶è¦ä½¿ç”¨çš„è¯ï¼Œæœ‰å·²ç»éƒ¨ç½²åˆ°å…¬ç½‘çš„ web apiï¼Œä¹Ÿå°±æ˜¯ github é¡¹ç›®çš„é¡¹ç›®å®˜ç½‘ï¼Œ å®¢æˆ·ç«¯çš„è¯æ˜¯ react-native çš„ï¼Œä¸è¿‡åªé€‚é…äº† iOS ï¼Œæ€»ä¹‹å‘¢ï¼Œè¿™æ ·ä¸€ä¸ªè‡ªç”¨çš„å°é¡¹ç›®ï¼Œå†™ md ä¹Ÿæ˜¯ä¸ºäº†è®©å®ƒå®Œå®Œæ•´æ•´çš„ã€‚ï¼ˆä¸è¿‡è¿˜æ˜¯è¯´ä¸€å¥å§ï¼Œä¸è¦å°è¯•åœ¨è„±ç¦»å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹ç›´æ¥è¯·æ±‚ api ï¼‰**

- - - -
# TODO
- [ ] å¢åŠ ç”¨æˆ·æ¦‚å¿µ
- [ ] å¢åŠ é€šç”¨é¢˜åº“ç»ƒä¹ ç”Ÿæˆ(ç°æœ‰ä»£ç æœ‰å®ç°è¿‡å¾®é‡å°è£…ï¼Œåªè¦ç»§ç»­å¾®é‡å°è£…ï¼Œå°±å¯ä»¥æ‘†è„±å•ä¸€æ€§ï¼Œé¢å‘æ›´å¤šç±»å‹çš„é¢˜ç›®)
- [ ] å¢å¼ºé¢˜ç›®å‡ºç°ä»¥åŠå¤ç°
- [ ] ä¼˜åŒ–ç”Ÿæˆç»ƒä¹ é€Ÿåº¦
- [ ] ä¼˜åŒ–ç»™å‡ºç›®æ ‡é¢˜ç›®çš„é€Ÿåº¦
- [ ] ä¼˜åŒ–é¢˜ç›®ç¼–å·ç”Ÿæˆæ–¹æ¡ˆ
- [ ] ä¼˜åŒ–é¢˜ç›®çš„å±•ç°æ–¹å¼ï¼ˆHtml â€”> PDF æˆ–æ›´ä½³ï¼ŒåŸæ¥æ˜¯å› ä¸º PDF æœ‰äº›å›¾ç‰‡æ— æ³•åŠ è½½ï¼ŒåŠ¡å¿…é¿å…è¸©å‘ï¼‰

- - - -

# å¦‚æœä½ çœŸçš„è¦ä½¿ç”¨ï¼ˆä¹Ÿç•™ç»™æœªæ¥çš„æˆ‘è‡ªå·±ğŸ˜­ï¼‰
é¦–å…ˆï¼Œè¦è¿è¡Œ fetchTask ä¸­çš„å¯æ‰§è¡Œç¨‹åºï¼Œ é¡¹ç›®ä¸­æ˜¯ mac å¹³å°çš„ï¼Œè‡ªè¡Œç”Ÿæˆçš„è¯ï¼Œåœ¨ fetchTask ç›®å½•ä¸‹è¿è¡Œ `go build ./`å°±OKäº†ï¼Œ æœ¬æœºçš„è¯è¿è¡Œå¤§æ¦‚30ç§’å°±å¥½äº†ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“å¤šä¹…ä¼šå¥½çš„è¯´ğŸ˜­ï¼‰ï¼ŒæœåŠ¡ç«¯è¿è¡Œçš„è¯å¯ä»¥å¼€ä¸ª screen ä¸€ç›´è¿è¡Œï¼Œ ä¼šé—´éš” 12å°æ—¶ é‡å¤æ‰§è¡Œä»»åŠ¡ ï¼Œä¸è¿‡è¿™å·²ç»åœ¨ä½œè€…çš„æœåŠ¡å™¨éƒ¨ç½²å¥½ä¸€æ¬¡äº†ï¼Œè¦æ˜¯ä¸æ„¿æ„åšï¼Œå°±åˆ«åšäº†å§ï¼Œæ¥ç€ï¼ŒWeb api ä¹Ÿæ˜¯éƒ¨ç½²å¥½äº†çš„ï¼Œå¦‚æœè‡ªè¡Œéƒ¨ç½²ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œå‘½ä»¤ `yarn && yarn start`ï¼Œä¼šç›‘å¬ `3000` ç«¯å£ï¼Œ ä¾èµ–äº† MongoDBï¼Œ æ•°æ®åº“ä¸­æœ‰ ç§‘ç›®çš„ collection, å¯¹åº”ä¸€ä¸ªé“¾æ¥ï¼Œ è¿˜æœ‰ä¸€ä¸ª classification çš„ collectionï¼Œ æ¯ä¸€ä¸ªå¯¹åº”ä¸€ä¸ªä»£è¡¨è¯¦ç»†åˆ†ç±»çš„jsonï¼Œjson çš„å½¢å¼å¤§æ¦‚å¦‚ä¸‹ï¼ˆæ‘˜è‡ªéƒ¨åˆ†çœŸå®æ•°æ®ï¼‰
```
â€œé«˜ä¸­æ•°å­¦é¢˜åº“(MongoDB collection çš„ key, ä»¥ä¸‹ä¸ºä¸Šè¿° json)â€ï¼š {
	"+ç®—æ³•ä¸æ¡†å›¾(ä¸€çº§åˆ†ç±»)": {
      "+ç®—æ³•ä¸ç¨‹åºæ¡†å›¾(äºŒçº§åˆ†ç±»)": {
        "ç¨‹åºæ¡†å›¾(ä¸‰çº§åˆ†ç±»ï¼Œåˆ†ç±»å‰æ— +å·ä»£è¡¨æ— å­—åˆ†ç±»ï¼Œå€¼ä¸ºå¯¹åº”é“¾æ¥)": "/gshuxue/lid/340",
        "è¾“å…¥è¯­å¥ã€è¾“å‡ºè¯­å¥å’Œèµ‹å€¼è¯­å¥": "/gshuxue/lid/342",
        "ç®—æ³•æ¡ˆä¾‹": "/gshuxue/lid/343",
        "æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥": "/gshuxue/lid/346",
        "ç®—æ³•çš„æ¦‚å¿µ": "/gshuxue/lid/339"
      },
      "+æ¡†å›¾": {
        "æµç¨‹å›¾": "/gshuxue/lid/344",
        "ç»“æ„å›¾": "/gshuxue/lid/345"
      }
    }
}
```
é™¤äº†ä¸Šè¿°æƒ…å†µï¼Œè¿˜æœ‰ä¸€äº›å„ä¾‹æ˜¯ä¸å­˜åœ¨ä¸‰çº§åˆ†ç±»ï¼ˆå†æ¬¡æ‘˜è‡ªéƒ¨åˆ†çœŸå®æ•°æ®ï¼‰
```
"åˆä¸­è‹±è¯­é¢˜åº“": {
 "+è¯æ±‡": {
      "å•è¯ã€è¯ç»„": {
        "null(æ— ä¸‰çº§åˆ†ç±»çš„æƒ…å†µä¸‹ä»¥nullä»£æ›¿ï¼Œå®åˆ™æ˜¯äºŒçº§åˆ†ç±»ç›´æ¥å¯¹åº”é“¾æ¥)": "/cyingyu/lid/3622"
      },
      "å­—æ¯": {
        "null": "/cyingyu/lid/3634"
      },
      "è¯­éŸ³": {
        "null": "/cyingyu/lid/3635"
      }
    },
}
```
ç„¶åå°±æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ä¸œè¥¿äº†
# Web Api
## */api/get/subject*
è·å–æ‰€æœ‰ç§‘ç›®åŠå…¶å¯¹åº”é“¾æ¥
ç¤ºä¾‹è¯·æ±‚ï¼š::http://wangyijie.tk/api/get/subject::
è¿”å›ï¼š
```
{
  "subject": {
    "åˆä¸­ç‰©ç†é¢˜åº“": "https://tiku.yixuela.com/cwuli",
    "åˆä¸­åŒ–å­¦é¢˜åº“": "https://tiku.yixuela.com/chuaxue",
    "é«˜ä¸­è‹±è¯­é¢˜åº“": "https://tiku.yixuela.com/gyingyu",
    "é«˜ä¸­å†å²é¢˜åº“": "https://tiku.yixuela.com/glishi",
    "é«˜ä¸­åœ°ç†é¢˜åº“": "https://tiku.yixuela.com/gdili",
    "åˆä¸­åœ°ç†é¢˜åº“": "https://tiku.yixuela.com/cdili",
    "åˆä¸­è‹±è¯­é¢˜åº“": "https://tiku.yixuela.com/cyingyu",
    "é«˜ä¸­ç‰©ç†é¢˜åº“": "https://tiku.yixuela.com/gwuli",
    "é«˜ä¸­åŒ–å­¦é¢˜åº“": "https://tiku.yixuela.com/ghuaxue",
    "åˆä¸­è¯­æ–‡é¢˜åº“": "https://tiku.yixuela.com/cyuwen",
    "åˆä¸­æ•°å­¦é¢˜åº“": "https://tiku.yixuela.com/cshuxue",
    "é«˜ä¸­ç”Ÿç‰©é¢˜åº“": "https://tiku.yixuela.com/gshengwu",
    "åˆä¸­æ”¿æ²»é¢˜åº“": "https://tiku.yixuela.com/czhengzhi",
    "åˆä¸­å†å²é¢˜åº“": "https://tiku.yixuela.com/clishi",
    "é«˜ä¸­è¯­æ–‡é¢˜åº“": "https://tiku.yixuela.com/gyuwen",
    "é«˜ä¸­æ•°å­¦é¢˜åº“": "https://tiku.yixuela.com/gshuxue",
    "é«˜ä¸­æ”¿æ²»é¢˜åº“": "https://tiku.yixuela.com/gzhengzhi",
    "åˆä¸­ç”Ÿç‰©é¢˜åº“": "https://tiku.yixuela.com/cshengwu"
  }
}

```

## */api/get/classification?subject=â€˜%wd%â€™*
æ ¹æ®ç¬¬ä¸€ä¸ª api è·å–åˆ°çš„jsonçš„ä»»ä½•ä¸€ä¸ªkeyæ¥æ›¿æ¢â€˜%wd%â€™ï¼Œæ¥å¾—åˆ°å…·ä½“çš„åˆ†ç±»ä¿¡æ¯
ç¤ºä¾‹è¯·æ±‚ï¼š::http://wangyijie.tk/api/get/classification?subject=é«˜ä¸­æ•°å­¦é¢˜åº“::
è¿”å›ï¼š
```
{
  "classification": {
    "+ç®—æ³•ä¸æ¡†å›¾": {
      "+ç®—æ³•ä¸ç¨‹åºæ¡†å›¾": {
        "ç¨‹åºæ¡†å›¾": "/gshuxue/lid/340",
        "è¾“å…¥è¯­å¥ã€è¾“å‡ºè¯­å¥å’Œèµ‹å€¼è¯­å¥": "/gshuxue/lid/342",
        "ç®—æ³•æ¡ˆä¾‹": "/gshuxue/lid/343",
        "æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥": "/gshuxue/lid/346",
        "ç®—æ³•çš„æ¦‚å¿µ": "/gshuxue/lid/339"
      },
      "+æ¡†å›¾": {
        "æµç¨‹å›¾": "/gshuxue/lid/344",
        "ç»“æ„å›¾": "/gshuxue/lid/345"
      }
    },
    "+é›†åˆä¸å¸¸ç”¨é€»è¾‘ç”¨è¯­": {
      "+é›†åˆ": {
        "é›†åˆé—´äº¤ã€å¹¶ã€è¡¥çš„è¿ç®—ï¼ˆç”¨Vennå›¾è¡¨ç¤ºï¼‰": "/gshuxue/lid/138",
        "é›†åˆé—´çš„åŸºæœ¬å…³ç³»": "/gshuxue/lid/141",
        "é›†åˆçš„å«ä¹‰åŠè¡¨ç¤º": "/gshuxue/lid/148"
      },
      "+å¸¸ç”¨é€»è¾‘ç”¨è¯­": {
        "ç®€å•çš„é€»è¾‘è”ç»“è¯": "/gshuxue/lid/177",
        "å››ç§å‘½é¢˜åŠå…¶ç›¸äº’å…³ç³»": "/gshuxue/lid/164",
        "å……åˆ†æ¡ä»¶ä¸å¿…è¦æ¡ä»¶": "/gshuxue/lid/166",
        "çœŸå‘½é¢˜ã€å‡å‘½é¢˜": "/gshuxue/lid/168",
        "å…¨ç§°é‡è¯ä¸å­˜åœ¨æ€§é‡è¯": "/gshuxue/lid/176"
      }
    },
	...... âˆ more
}

```

## */api/user/get/range?fl=â€˜%wd% (like) â€˜gshuxueâ€™â€™&id=â€˜%wd%â€™&count=â€˜%wd%â€™*
è·å–è¦ç”Ÿæˆç»ƒä¹ çš„ç›®æ ‡é¢˜ç›®çš„ id, å…¶ä¸­ fl çš„å€¼æ˜¯ä¸Šä¸€ä¸ª api æ¯ä¸€ä¸ªé“¾æ¥ä¸­çš„ç¬¬ä¸€ä¸ªè¢«ä¸¤ä¸ªæ–œæ å¤¹ç€çš„éƒ¨åˆ†ï¼Œ å°±åƒ _::gshuxue::_lid_176ï¼Œ id åˆ™æ˜¯ /gshuxue_lid/::176::ï¼Œcountæ˜¯é¢˜ç›®æ•°é‡ï¼Œ é»˜è®¤ä¸º 20ï¼Œ è¿™ä¸ªå¯èƒ½æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºè¦æ£€æŸ¥æ‰€æœ‰é¢˜ç›®çš„å¯ç”¨æ€§, `//TODO`
ç¤ºä¾‹è¯·æ±‚ï¼š::http://wangyijie.tk/api/user/get/range?id=141&fl=gshuxue::
è¿”å›ï¼š
```
[
  244889,
  245730,
  245030,
  245438,
  245230,
  245880,
  245702,
  245721,
  245573,
  245561,
  245641,
  245448,
  245223,
  245321,
  244760,
  245475,
  245883,
  245504,
  245377,
  245606
]
```
åœ¨è¿™é‡Œè¯·æ±‚è¿‡çš„é¢˜ç›® id éƒ½ä¼šè¢«è®°å½•åœ¨æ•°æ®åº“ä¸­çš„ user è¡¨ ä¸­çš„ did å­—æ®µï¼Œ ä¸ä¼šå†ä¸€æ¬¡å‡ºç°ï¼Œä¸è¿‡é¢˜ç›®çš„å‡ºç°ä»¥åŠå¤å‡ºç°å¤„ç†ä¹Ÿè®¸æ˜¯ä¸€ä¸ª`//TODO`

## */service/detail/get?title=â€˜%wd%â€™&id=â€˜%wds%.join(â€˜,â€™)â€™*
ç”¨äºç”Ÿæˆç»ƒä¹ çš„ï¼Œå½“ç„¶åŒ…å«äº†é¢˜ç›®Â·ç­”æ¡ˆÂ·åˆ†æï¼Œ title å‚æ•°å®Œå…¨æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œæ˜¾ç¤ºä¸ºç»ƒä¹ æœ€ä¸Šé¢çš„å¤§æ ‡é¢˜ï¼Œid å‚æ•°æ˜¯ä¸Šä¸€ä¸ª api è·å–åˆ°çš„æ•°ç»„åºåˆ—åŒ–æˆä»¥åŠè§’é€—å·éš”å¼€çš„å­—ç¬¦ä¸²(æˆ‘è¿™ä¸ª url å‚æ•°å€¼æ˜¯ä¸æ˜¯å†™å¾—å¾ˆå½¢è±¡ğŸ¤ª)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯è‡ªå·±è‡ªç”±ç»„åˆçš„ï¼Œå‰ææ˜¯é¢˜ç›® id è¦å­˜åœ¨ï¼Œ ç”Ÿæˆå™¨ä¼šå¿½ç•¥ä¸å­˜åœ¨çš„ï¼Œè¯¥ api ä¹Ÿå¯èƒ½ç¨æ…¢ï¼Œå¾…ä¼˜åŒ– `//TODO`
ç¤ºä¾‹è¯·æ±‚ï¼š::http://wangyijie.tk/service/detail/get?title=ä¼‘é—²ç»ƒä¹ &id=245573,245561,245641::(æƒ³è¾“ä¿®ä»™ç»ƒä¹ çš„è¯´ï¼Œè¿™è¾“å…¥æ³•ã€‚ã€‚ã€‚)
è¿”å›ï¼š
```
{
  "do": "688.8287504015877wyj.do",
  "ta": "1325.0745550342224wyj.ta",
  "an": "271.16303812565604wyj.am"
}
```
doæ˜¯åœ¨è¦è·å–é¢˜ç›®æ—¶è¦ç”¨åˆ°çš„
taæ˜¯åœ¨è¦è·å–è§£ææ—¶è¦ç”¨åˆ°çš„
anæ˜¯åœ¨è¦è·å–ç­”æ¡ˆæ˜¯è¦ç”¨åˆ°çš„
å…·ä½“ä½¿ç”¨çœ‹ä¸‹é¢
å”¯ä¸€ç ç”¨åˆ°éšæœºæ•°çš„å½¢å¼ï¼Œå¾…æ›´æ–°çš„ç”Ÿæˆæ–¹å¼ ,å¦å¤–æ³¨æ„ hash ç”Ÿæˆä¸­çš„ / ç¬¦å· `//TODO`

## */service/detail/pdf?name=â€˜%wd% -> [â€˜anâ€™, â€˜ta, â€˜doâ€™]â€™*
nameå­—æ®µå°±æ˜¯ä¸Šä¸€ä¸ª api çš„ä»»æ„ä¸€ä¸ª value å•¦ï¼Œ è™½è¯´æ˜¯ pdf ï¼Œä½†æ˜¯å‘¢ï¼Œ
å…¶å®æ˜¯ Html ğŸ˜¨ so, `//TODO`
ç¤ºä¾‹è¯·æ±‚ï¼š::http://wangyijie.tk/service/detail/pdf?name=688.8287504015877wyj.do.html::
è¿”å›ï¼š

![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.14.24.png)
ç„¶åè¯¥æ€æ ·æ€æ ·æ‰“å°ä¸‹æ¥å°±è¡Œäº†
å…¶ä¸­ç”Ÿæˆçš„é¢˜å·ä¸‹ä¼šæœ‰ä¸€ä¸ªæ·¡æ·¡çš„é•¿ä¸²æ•°å­—ï¼Œè¦æ˜¯æœ‰é¢˜ç›®æœ‰é—®é¢˜åˆ™å¯ä»¥é€šè¿‡è¿™ä¸ªé¢˜ç›® id æ¥æ£€æŸ¥æˆ–è€…æŠ¥å‘Š Bug

- - - -
# å½“ç„¶æ˜¯ä¸å¯èƒ½è¿™ä¹ˆéº»çƒ¦çš„ï¼Œæ˜¯æœ‰å®¢æˆ·ç«¯çš„å‘€
ç›®å‰åªé€‚é… iOS å®¢æˆ·ç«¯ï¼Œéœ€å…ˆåœ¨ nativeClient ç›®å½•ä¸‹æ‰§è¡Œ `yarn` æ¥ç€æ‰“å¼€iosç›®å½•ä¸‹çš„ Xcode é¡¹ç›®ï¼Œ ä¿®æ”¹ä¸€ä¸‹ Team ç„¶åå† è¿è¡Œ

## çœ‹æ•ˆæœ

![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.48.14.png) 
![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.48.57.png)

![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.49.55.png)


![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.50.04.png)
![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.50.21.png)
è¾“å…¥ç»ƒä¹ æ ‡é¢˜
![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.50.26.png)
è¿™å…¶å®æ˜¯ä¸€ä¸ªåŠ è½½åŠ¨ç”»

![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.50.41.png)
é€‰æ‹©ç”Ÿæˆå¥½çš„ç»ƒä¹ 
![](readme/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-02-19%20%E4%B8%8B%E5%8D%885.50.52.png)
å®Œæˆâœ…
